(()=>{var e={873:(e,t,r)=>{var n=r(325).Symbol;e.exports=n},528:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,l=e.length;++r<n;)e[l+r]=t[r];return e}},120:(e,t,r)=>{var n=r(528),l=r(891);e.exports=function e(t,r,i,o,a){var s=-1,c=t.length;for(i||(i=l),a||(a=[]);++s<c;){var u=t[s];r>0&&i(u)?r>1?e(u,r-1,i,o,a):n(a,u):o||(a[a.length]=u)}return a}},552:(e,t,r)=>{var n=r(873),l=r(659),i=r(350),o=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?l(e):i(e)}},534:(e,t,r)=>{var n=r(552),l=r(346);e.exports=function(e){return l(e)&&"[object Arguments]"==n(e)}},840:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},659:(e,t,r)=>{var n=r(873),l=Object.prototype,i=l.hasOwnProperty,o=l.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,a),r=e[a];try{e[a]=void 0;var n=!0}catch(e){}var l=o.call(e);return n&&(t?e[a]=r:delete e[a]),l}},891:(e,t,r)=>{var n=r(873),l=r(428),i=r(449),o=n?n.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||l(e)||!!(o&&e&&e[o])}},350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},325:(e,t,r)=>{var n=r(840),l="object"==typeof self&&self&&self.Object===Object&&self,i=n||l||Function("return this")();e.exports=i},970:(e,t,r)=>{var n=r(120);e.exports=function(e){return null!=e&&e.length?n(e,1):[]}},428:(e,t,r)=>{var n=r(534),l=r(346),i=Object.prototype,o=i.hasOwnProperty,a=i.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(e){return l(e)&&o.call(e,"callee")&&!a.call(e,"callee")};e.exports=s},449:e=>{var t=Array.isArray;e.exports=t},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}}},t={};function r(n){var l=t[n];if(void 0!==l)return l.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.React,t=window.wp.plugins,n=window.wp.editPost,l=window.wp.components,i=window.wp.data,o=window.wp.date,a=e=>"AUTHOR"===e.participation,s=e=>"IMAGE_ORIGINATOR"===e.participation,c=(e,t)=>parseInt(e.internalIdentification)===parseInt(t.pro_litteris_author);var u=r(970),p=r.n(u);const d=window.wp.element,m=({pixel:t={}})=>{const{url:r}=t;return(0,e.createElement)(l.TextControl,{label:"Pixel",value:r,readOnly:!0})},f=({image:t,style:r})=>(0,e.createElement)("div",{key:t.id,style:r},(0,e.createElement)("a",{href:`/wp-admin/post.php?post=${t.id}&action=edit`,target:"_blank"},(0,e.createElement)(l.Dashicon,{icon:"external"})),t.caption.raw||t.title.raw),g=({states:t=[".","..","..."],interval:r=330})=>{const[n,l]=(0,d.useState)(0);return(0,d.useEffect)((()=>{const e=setInterval((()=>{l((e=>void 0!==t[e+1]?e+1:0))}),r);return()=>clearInterval(e)}),[t,r]),(0,e.createElement)("div",null,t[n])},y=({message:t={},draft:r={},pushError:n,onSubmitReport:u})=>{const d=(0,i.useSelect)((e=>e("core/editor").isEditedPostDirty()),[]),m=(0,i.useSelect)((e=>e("core/editor").isSavingPost()),[]),y=(()=>{var e;const t=((e=[])=>(0,i.useSelect)((e=>{const t=e("core/block-editor");return t?t.getBlocks():[]}),e))(),r=t.filter((e=>"core/image"===e.name&&typeof e.attributes==typeof[]&&void 0!==e.attributes.id)),n=t.filter((e=>"core/gallery"===e.name&&typeof e.attributes==typeof[]&&typeof e.attributes.ids==typeof[])),l=t.filter((e=>"core/gallery"===e.name&&typeof e.innerBlocks==typeof[])).map((e=>e.innerBlocks.filter((e=>"core/image"===e.name)).map((e=>e.attributes.id)))),o=[...new Set([...r.map((e=>e.attributes.id)),...p()(n.map((e=>e.attributes.ids))),...p()(l)])];return null!==(a=o,e=(0,i.useSelect)((e=>{const t=e("core");return t?t.getEntityRecords("postType","attachment",{include:a}):[]}),[a]))&&void 0!==e?e:[];var a})();if("string"==typeof r.error)return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h3",null,"Meldung"),(0,e.createElement)(l.Notice,{status:"warning",isDismissible:!1},r.error));if(void 0===r.pixelUid&&void 0===t.pixelUid)return null;const E=void 0!==t.reported&&null!==t.reported,{pixelUid:v,title:x,plaintext:h,participants:w}=t.pixelUid?t:r;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h3",null,"Meldung"),(0,e.createElement)(l.TextControl,{label:"UID",value:v,readOnly:!0}),(0,e.createElement)(l.TextControl,{label:"Titel",value:x,readOnly:!0}),(0,e.createElement)(l.TextareaControl,{label:`Text (${h.length} Zeichen)`,value:h,readOnly:!0}),(0,e.createElement)(l.BaseControl,{label:"Autoren"},(0,e.createElement)("ul",{style:{listStylePosition:"inside",margin:0,marginBottom:20}},(e=>e.filter(a))(w).map((t=>(0,e.createElement)("li",{style:{background:"#efefef",borderRadius:4,padding:"6px 10px",border:"1px solid #757575"},key:t.memberId},(0,e.createElement)(b,{...t})))))),(0,e.createElement)(l.BaseControl,{label:"Bilder"},(0,e.createElement)("ul",{style:{listStylePosition:"inside",margin:0,marginBottom:20}},(e=>e.filter(s))(w).map((t=>{const r=((e,t)=>e.filter((e=>c(t,e))))(y,t);return(0,e.createElement)("li",{style:{background:"#efefef",borderRadius:4,padding:"6px 10px",border:"1px solid #757575"},key:t.memberId},(0,e.createElement)(b,{...t}),(0,e.createElement)("div",{style:{marginTop:5}},r.length>0?r.map((t=>(0,e.createElement)(f,{key:t.id,image:t,style:{marginBottom:2}}))):(0,e.createElement)(g,null)))})))),n&&!E&&(0,e.createElement)("p",{style:{color:"#C62828"}},n),E?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",{className:"description"},(e=>{const t=(0,o.__experimentalGetSettings)();return(0,o.date)(t.formats.datetime,e)})(1e3*parseInt(t.reported)),"."),(0,e.createElement)("p",null,"Meldung war erfolgreich ðŸŽ‰"),(0,e.createElement)(l.Button,{disabled:d||m,isSecondary:!0,title:"Bitte speichern vor dem Melden.",onClick:u},"Meldung aktualsieren"),(0,e.createElement)("p",{className:"description"},"AusschlieÃŸlich Autoren kÃ¶nnen aktualisiert werden.")):(0,e.createElement)(l.Button,{disabled:d||m||E,isPrimary:!0,title:"Bitte speichern vor dem Melden.",onClick:u},"Jetzt melden"),(0,e.createElement)("hr",null),(0,e.createElement)(l.BaseControl,{label:"Weitere Bilder"},(0,e.createElement)("ul",{style:{listStylePosition:"inside",margin:0,marginBottom:20}},((e,t)=>{const r=[];for(const n of e)0===t.filter((e=>c(e,n))).length&&r.push(n);return r})(y,w).map((t=>(0,e.createElement)(f,{key:t.id,image:t,style:{marginBottom:2}}))))))},b=({memberId:t,firstName:r,surName:n,internalIdentification:l})=>(0,e.createElement)("a",{href:`/wp-admin/user-edit.php?user_id=${l}`},r," ",n," (",t,")"),E=()=>{const[t,r]=(()=>{const e=(0,i.useSelect)((e=>e("core/editor").getEditedPostAttribute("pro_litteris")),[]),t=(0,i.useDispatch)("core/editor");return[e,()=>{t.editPost({pro_litteris:{...e,pushMessage:!0}}).then((e=>{t.savePost()}))}]})();if("string"==typeof t.info)return(0,e.createElement)("p",null,t.info);if("string"==typeof t.error)return(0,e.createElement)("p",null,"Error: ",t.error);const n=t.pixel;return n?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(m,{pixel:n}),(0,e.createElement)("hr",null),(0,e.createElement)(y,{message:t.message,draft:t.messageDraft,pushError:t.pushError,onSubmitReport:()=>{r()}})):(0,e.createElement)("p",null,"No valid pixel found.")},v="pro-litteris-sidebar";(0,t.registerPlugin)(v,{render:()=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.PluginSidebarMoreMenuItem,{target:v,icon:"media-text"},"ProLitteris"),(0,e.createElement)(n.PluginSidebar,{name:v,icon:"media-text",title:"ProLitteris"},(0,e.createElement)(l.PanelBody,null,(0,e.createElement)(E,null))))})})()})();