!function(){var e={705:function(e,t,r){var n=r(639).Symbol;e.exports=n},488:function(e){e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},78:function(e,t,r){var n=r(488),o=r(285);e.exports=function e(t,r,i,l,a){var c=-1,s=t.length;for(i||(i=o),a||(a=[]);++c<s;){var u=t[c];r>0&&i(u)?r>1?e(u,r-1,i,l,a):n(a,u):l||(a[a.length]=u)}return a}},239:function(e,t,r){var n=r(705),o=r(607),i=r(333),l=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":l&&l in Object(e)?o(e):i(e)}},454:function(e,t,r){var n=r(239),o=r(5);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},957:function(e,t,r){var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},607:function(e,t,r){var n=r(705),o=Object.prototype,i=o.hasOwnProperty,l=o.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,a),r=e[a];try{e[a]=void 0;var n=!0}catch(e){}var o=l.call(e);return n&&(t?e[a]=r:delete e[a]),o}},285:function(e,t,r){var n=r(705),o=r(694),i=r(469),l=n?n.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||o(e)||!!(l&&e&&e[l])}},333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},639:function(e,t,r){var n=r(957),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},564:function(e,t,r){var n=r(78);e.exports=function(e){return null!=e&&e.length?n(e,1):[]}},694:function(e,t,r){var n=r(454),o=r(5),i=Object.prototype,l=i.hasOwnProperty,a=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return o(e)&&l.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},469:function(e){var t=Array.isArray;e.exports=t},5:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.element,t=window.wp.plugins,n=window.wp.editPost,o=window.wp.components,i=window.wp.data,l=window.wp.date;const a=e=>"AUTHOR"===e.participation,c=e=>"IMAGE_ORIGINATOR"===e.participation,s=(e,t)=>parseInt(e.internalIdentification)===parseInt(t.pro_litteris_author);var u=r(564),p=r.n(u);const d=t=>{let{pixel:r={}}=t;const{url:n}=r;return(0,e.createElement)(o.TextControl,{label:"Pixel",value:n,readOnly:!0})},m=t=>{let{image:r,style:n}=t;return(0,e.createElement)("div",{key:r.id,style:n},(0,e.createElement)("a",{href:`/wp-admin/post.php?post=${r.id}&action=edit`,target:"_blank"},(0,e.createElement)(o.Dashicon,{icon:"external"})),r.caption.raw||r.title.raw)},f=t=>{let{states:r=[".","..","..."],interval:n=330}=t;const[o,i]=(0,e.useState)(0);return(0,e.useEffect)((()=>{const e=setInterval((()=>{i((e=>void 0!==r[e+1]?e+1:0))}),n);return()=>clearInterval(e)}),[r,n]),(0,e.createElement)("div",null,r[o])},g=t=>{let{message:r={},draft:n={},pushError:u,onSubmitReport:d}=t;const g=(0,i.useSelect)((e=>e("core/editor").isEditedPostDirty()),[]),b=(0,i.useSelect)((e=>e("core/editor").isSavingPost()),[]),E=(()=>{var e;const t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,i.useSelect)((e=>{const t=e("core/block-editor");return t?t.getBlocks():[]}),e)}(),r=t.filter((e=>"core/image"===e.name&&typeof e.attributes==typeof[]&&void 0!==e.attributes.id)),n=t.filter((e=>"core/gallery"===e.name&&typeof e.attributes==typeof[]&&typeof e.attributes.ids==typeof[])),o=t.filter((e=>"core/gallery"===e.name&&typeof e.innerBlocks==typeof[])).map((e=>e.innerBlocks.filter((e=>"core/image"===e.name)).map((e=>e.attributes.id)))),l=[...new Set([...r.map((e=>e.attributes.id)),...p()(n.map((e=>e.attributes.ids))),...p()(o)])];return null!==(a=l,e=(0,i.useSelect)((e=>{const t=e("core");return t?t.getEntityRecords("postType","attachment",{include:a}):[]}),[a]))&&void 0!==e?e:[];var a})();if("string"==typeof n.error)return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h3",null,"Meldung"),(0,e.createElement)(o.Notice,{status:"warning",isDismissible:!1},n.error));if(void 0===n.pixelUid&&void 0===r.pixelUid)return null;const v=void 0!==r.reported&&null!==r.reported,{pixelUid:x,title:h,plaintext:w,participants:S}=r.pixelUid?r:n;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h3",null,"Meldung"),(0,e.createElement)(o.TextControl,{label:"UID",value:x,readOnly:!0}),(0,e.createElement)(o.TextControl,{label:"Titel",value:h,readOnly:!0}),(0,e.createElement)(o.TextareaControl,{label:`Text (${w.length} Zeichen)`,value:w,readOnly:!0}),(0,e.createElement)(o.BaseControl,{label:"Autoren"},(0,e.createElement)("ul",{style:{listStylePosition:"inside",margin:0,marginBottom:20}},(e=>e.filter(a))(S).map((t=>(0,e.createElement)("li",{style:{background:"#efefef",borderRadius:4,padding:"6px 10px",border:"1px solid #757575"},key:t.memberId},(0,e.createElement)(y,t)))))),(0,e.createElement)(o.BaseControl,{label:"Bilder"},(0,e.createElement)("ul",{style:{listStylePosition:"inside",margin:0,marginBottom:20}},(e=>e.filter(c))(S).map((t=>{const r=((e,t)=>e.filter((e=>s(t,e))))(E,t);return(0,e.createElement)("li",{style:{background:"#efefef",borderRadius:4,padding:"6px 10px",border:"1px solid #757575"},key:t.memberId},(0,e.createElement)(y,t),(0,e.createElement)("div",{style:{marginTop:5}},r.length>0?r.map((t=>(0,e.createElement)(m,{key:t.id,image:t,style:{marginBottom:2}}))):(0,e.createElement)(f,null)))})))),u&&!v&&(0,e.createElement)("p",{style:{color:"#C62828"}},u),v?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",{className:"description"},(e=>{const t=(0,l.__experimentalGetSettings)();return(0,l.date)(t.formats.datetime,e)})(1e3*parseInt(r.reported)),"."),(0,e.createElement)("p",null,"Meldung war erfolgreich ðŸŽ‰")):(0,e.createElement)(o.Button,{disabled:g||b||v,isPrimary:!0,title:"Bitte speichern vor dem Melden.",onClick:d},"Jetzt melden"),(0,e.createElement)("hr",null),(0,e.createElement)(o.BaseControl,{label:"Weitere Bilder"},(0,e.createElement)("ul",{style:{listStylePosition:"inside",margin:0,marginBottom:20}},((e,t)=>{const r=[];for(const n of e)0===t.filter((e=>s(e,n))).length&&r.push(n);return r})(E,S).map((t=>(0,e.createElement)(m,{key:t.id,image:t,style:{marginBottom:2}}))))))},y=t=>{let{memberId:r,firstName:n,surName:o,internalIdentification:i}=t;return(0,e.createElement)("a",{href:`/wp-admin/user-edit.php?user_id=${i}`},n," ",o," (",r,")")};var b=()=>{const[t,r]=(()=>{const e=(0,i.useSelect)((e=>e("core/editor").getEditedPostAttribute("pro_litteris")),[]),t=(0,i.useDispatch)("core/editor");return[e,()=>{t.editPost({pro_litteris:{...e,pushMessage:!0}}).then((e=>{t.savePost()}))}]})();if("string"==typeof t.info)return(0,e.createElement)("p",null,t.info);if("string"==typeof t.error)return(0,e.createElement)("p",null,"Error: ",t.error);const n=t.pixel;return n?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(d,{pixel:n}),(0,e.createElement)("hr",null),(0,e.createElement)(g,{message:t.message,draft:t.messageDraft,pushError:t.pushError,onSubmitReport:()=>{r()}})):(0,e.createElement)("p",null,"No valid pixel found.")};const E="pro-litteris-sidebar";(0,t.registerPlugin)(E,{render:()=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.PluginSidebarMoreMenuItem,{target:E,icon:"media-text"},"ProLitteris"),(0,e.createElement)(n.PluginSidebar,{name:E,icon:"media-text",title:"ProLitteris"},(0,e.createElement)(o.PanelBody,null,(0,e.createElement)(b,null))))})}()}();